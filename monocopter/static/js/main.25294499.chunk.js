(this.webpackJsonpmonocoptor=this.webpackJsonpmonocoptor||[]).push([[0],{27:function(t,o,e){t.exports=e.p+"static/media/monocoptor.c62f462c.png"},30:function(t,o,e){t.exports=e.p+"static/media/monocoptor_flying.ea1a8012.png"},31:function(t,o,e){t.exports=e.p+"static/media/tot.c281fe14.wav"},40:function(t,o,e){t.exports=e(56)},45:function(t,o,e){},46:function(t,o,e){},55:function(t,o,e){},56:function(t,o,e){"use strict";e.r(o);var n=e(0),r=e.n(n),a=e(14),s=e.n(a),c=(e(45),e(28)),l=e(6),i=e(11),p=e(15),u=e(17),d=e(18),h=e(27),m=e.n(h),f=e(30),_=e.n(f),g=e(31),B=e.n(g),b=(e(46),new Audio(B.a)),x=function(t){Object(d.a)(e,t);var o=Object(u.a)(e);function e(){return Object(i.a)(this,e),o.apply(this,arguments)}return Object(p.a)(e,[{key:"render",value:function(){var t=m.a;if(this.props.coptor.thrust&&(t=this.props.coptor.thrust>0?_.a:m.a,this.props.coptor.thrust>0)){var o=Math.floor(this.props.coptor.thrust)/20;o>1&&(o=1),b.volume=o,b.play()}return r.a.createElement("div",null,r.a.createElement("div",{className:"drone",style:{left:77,top:550+240*this.props.coptor.z,backgroundImage:"url(".concat(t,")"),backgroundSize:"100% 100%"}}),r.a.createElement("div",{className:"cylinder",style:{left:20,top:20}},r.a.createElement("div",{className:"ellipse",style:{backgroundColor:"deepskyblue"}}),r.a.createElement("div",{className:"rectangle",style:{backgroundColor:"lightgray"}})))}}]),e}(r.a.Component),y=e(69),v=e(72),z=e(71),k=function(t){Object(d.a)(e,t);var o=Object(u.a)(e);function e(){return Object(i.a)(this,e),o.apply(this,arguments)}return Object(p.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{left:170,top:22,position:"absolute",color:"#ffffff"},id:"discrete-slider-small-steps",gutterBottom:!0},"Mass Err \xa0\xa0: \xa0\xa0",this.props.controlBox.mass_error),r.a.createElement(v.a,{style:{left:320,top:22,width:400,position:"absolute"},defaultValue:0,value:this.props.controlBox.mass_error,onChange:function(o,e){t.props.controlBoxChanged(Object(l.a)({},t.props.controlBox,{mass_error:e}))},min:.5,max:3,step:.01}),r.a.createElement(y.a,{style:{left:170,top:52,position:"absolute",color:"#ffffff"},id:"discrete-slider-small-steps",gutterBottom:!0},"P value : \xa0\xa0",this.props.controlBox.k_p),r.a.createElement(v.a,{style:{left:320,top:52,width:400,position:"absolute"},defaultValue:0,value:this.props.controlBox.k_p,onChange:function(o,e){t.props.controlBoxChanged(Object(l.a)({},t.props.controlBox,{k_p:e}))},min:0,max:50,step:1}),r.a.createElement(y.a,{style:{left:170,top:82,position:"absolute",color:"#ffffff"},id:"discrete-slider-small-steps",gutterBottom:!0},"D value : \xa0\xa0",this.props.controlBox.k_d),r.a.createElement(v.a,{style:{left:320,top:82,width:400,position:"absolute"},defaultValue:0,value:this.props.controlBox.k_d,onChange:function(o,e){t.props.controlBoxChanged(Object(l.a)({},t.props.controlBox,{k_d:e}))},min:0,max:20,step:1}),r.a.createElement(y.a,{style:{left:170,top:112,position:"absolute",color:"#ffffff"},id:"discrete-slider-small-steps",gutterBottom:!0},"I\xa0 value : \xa0\xa0",this.props.controlBox.k_i),r.a.createElement(v.a,{style:{left:320,top:112,width:400,position:"absolute"},defaultValue:0,value:this.props.controlBox.k_i,onChange:function(o,e){t.props.controlBoxChanged(Object(l.a)({},t.props.controlBox,{k_i:e}))},min:0,max:20,step:1}),r.a.createElement(z.a,{variant:"contained",color:"default",style:{position:"absolute",left:350,top:157,width:80,height:25},onClick:function(o){t.props.coptorStateInit()}},"Init"),r.a.createElement(z.a,{variant:"contained",color:this.props.controlBox.state.ready?"secondary":"default",style:{position:"absolute",left:470,top:157,width:80,height:25},onClick:function(o){t.props.controlStateChanged(Object(l.a)({},t.props.controlBox.state,{ready:!t.props.controlBox.state.ready}))}},"Run"))}}]),e}(r.a.Component),j=e(36),O=e.n(j),w=function t(o){var e=this;Object(i.a)(this,t),this.initialize=function(t,o){e.g=9.81,e.z=t,e.z_dot=0,e.m=o,e.thrust=0},this.z_dot_dot=function(){return(e.m*e.g-e.thrust)/e.m},this.advance_state=function(t){var o=e.z_dot_dot()*t;e.z_dot=e.z_dot+o;var n=e.z_dot*t;e.z=e.z+n},this.initialize(o.z,o.mass)},C=function t(o,e){var n=this;Object(i.a)(this,t),this.thrust_control=function(t,o,e,r,a){var s=n.monocoptor.m*n.mass_error,c=t-o,l=e-r;n.integral_z+=c*a;var i=n.k_p*c+n.k_d*l+n.k_i*n.integral_z;return s*(n.g-i)},this.runBy=function(t){n.monocoptor.thrust=n.thrust_control(n.target_z,n.monocoptor.z,n.target_z_dot,n.monocoptor.z_dot,t),n.monocoptor.advance_state(t)},this.name="PidController",this.monocoptor=o,this.mass_error=e.controlBox.mass_error,this.k_p=e.controlBox.k_p,this.k_d=e.controlBox.k_d,this.k_i=e.controlBox.k_i,this.integral_z=0,this.g=9.81,this.target_z=e.controlBox.target_z,this.target_z_dot=0},E=(e(55),{coptor:{thrust:0,k_f:.1,mass:1,z:0,z_dot:0,z_list:[],target_z_list:[]},controlBox:{state:{ready:!1,manual:!1},throttle:0,mass_error:1,k_p:10,k_d:0,k_i:0,target_z:-1}}),S=function(t){Object(d.a)(e,t);var o=Object(u.a)(e);function e(){var t;return Object(i.a)(this,e),(t=o.call(this)).initialize=function(){t.setState(E,(function(){t.monocoptor=new w(t.state.coptor),t.controller=new C(t.monocoptor,t.state),"PidController"!==t.controller.name&&(E.coptor.z=-1)}))},t.stopFunction=function(){t.setState(Object(l.a)({},t.state,{controlBox:Object(l.a)({},t.state.controlBox,{state:Object(l.a)({},t.state.controlBox.state,{ready:!1})})}))},t.update=function(){"BaseController"===t.controller.name&&E.controlBox.state.manual?t.state.controlBox.throttle>=0&&(t.monocoptor.omega=Math.sqrt(t.state.controlBox.throttle),t.controller.runBy(t.dt,t.stopFunction),t.coptorStateUpdate(t.monocoptor.z,t.monocoptor.thrust)):t.state.controlBox.state.ready&&(t.controller.runBy(t.dt,t.stopFunction),t.coptorStateUpdate(t.monocoptor.z,t.monocoptor.thrust))},t.coptorStateInit=function(){t.setState(Object(l.a)({},t.state,{coptor:E.coptor}),(function(){t.monocoptor=new w(t.state.coptor),t.controller=new C(t.monocoptor,t.state),t.stopFunction()}))},t.coptorStateUpdate=function(o,e){t.setState(Object(l.a)({},t.state,{coptor:Object(l.a)({},t.state.coptor,{z:o,thrust:e,z_list:[].concat(Object(c.a)(t.state.coptor.z_list),[-o]),target_z_list:[].concat(Object(c.a)(t.state.coptor.target_z_list),[-t.state.controlBox.target_z])})}))},t.controlBoxChanged=function(o){t.setState(Object(l.a)({},t.state,{controlBox:o}),(function(){t.monocoptor=new w(t.state.coptor),t.controller=new C(t.monocoptor,t.state)}))},t.controlStateChanged=function(o){t.setState(Object(l.a)({},t.state,{controlBox:Object(l.a)({},t.state.controlBox,{state:o})}))},t.state=E,t.dt=.01,t}return Object(p.a)(e,[{key:"componentDidMount",value:function(){this.initialize(),setInterval(this.update,10)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,{coptor:this.state.coptor}),r.a.createElement(k,{controlBox:this.state.controlBox,controlBoxChanged:this.controlBoxChanged,controlStateChanged:this.controlStateChanged,coptorStateInit:this.coptorStateInit}),r.a.createElement(O.a,{style:{left:130,top:190,position:"absolute"},config:{displayModeBar:!1},data:[{type:"scatter",showlegend:!1,y:this.state.coptor.z_list,mode:"lines+points",marker:{color:"white"}},{type:"scatter",showlegend:!1,y:this.state.coptor.target_z_list,mode:"lines+points",marker:{color:"red"}}],layout:{title:"Monocopter PID Controller",width:650,height:400,margin:{l:35,r:30,t:35,b:32},paper_bgcolor:"#000000",plot_bgcolor:"#000000",font:{color:"#ffffff"}}}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.25294499.chunk.js.map
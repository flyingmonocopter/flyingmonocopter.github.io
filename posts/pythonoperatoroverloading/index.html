<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>파이선 연산자 오버로딩 이해  | Flying Monocopter</title>
  <meta name="description" content="Flying Monocopter '파이선 연산자 오버로딩 이해'을 한 번 살펴보세요.">
  <meta property="og:title" content="파이선 연산자 오버로딩 이해">
  
  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2020-08-19">
  
  <meta property="og:description" content="Flying Monocopter '파이선 연산자 오버로딩 이해'을 한 번 살펴보세요.">
  <meta property="og:url" content="https://flyingmonocopter.github.io/posts/pythonoperatoroverloading/">
  <meta property="og:site_name" content="Flying Monocopter">
  
  <meta property="og:image" content="https://flyingmonocopter.github.io/images/thumbnail.png">
  
  
  <meta property="og:tags" content="python">
  
  <meta property="og:tags" content="object">
  
  <meta property="og:tags" content="numpy">
  
  <meta property="og:tags" content="operator">
  
  <meta property="og:tags" content="operator overloading">
  
  <meta property="og:tags" content="파이선">
  
  <meta property="og:tags" content="객체">
  
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="canonical" href="https://flyingmonocopter.github.io/posts/pythonoperatoroverloading/">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/agate.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-180510293-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-180510293-1');
  </script>
  
  
  <script type="text/javascript">
  function toggle_visibility(id) {
    var e = document.getElementById(id);
    if (e.className === 'menu')
      e.className = 'menu hidden';
    else
      e.className = 'menu';
  }
  </script>
</head>
<body>
  <div class="navbar">
    <div class="logo burger">
      <a href="/">
        <img src="/images/logo.png" height="34px" />
      </a>
    </div>
    <div class="burger">
      <button onclick="toggle_visibility('menu')">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </div>
    <div id="menu" class="menu hidden">
      <ul>
        <li><a href="/posts">POSTS...</a></li>
        <li><a href="/categories">@CATEGORIES</a></li>
        <li><a href="/tags">#TAGS</a></li>
        <li><a href="/about">{ABOUT}</a></li>
      </ul>
      <input class="search" id="search-input" type="search" placeholder="검색어" value="">
    </div>
  </div>


<div class="post">
  <div class="post-title">
    <a href="https://flyingmonocopter.github.io/posts/pythonoperatoroverloading/">
      <img src="/images/post-title-icon.png" />
      <div class="post-meta">
        <time>
          
          2020년 08월 19일 21시 47분
          
        </time>
        <h1>파이선 연산자 오버로딩 이해</h1>
      </div>
    </a>
  </div>
  
  <section class="post-content">
    <p>파이선 객체와 연산자 오버로딩 예제</p>
<p>주의 : 파이선 구현체를 살펴보지는 않았기 때문에, 의도하지 않은 오류가 포함되어 있을 수 있습니다.</p>
<h2 id="의도하지-않게-동작하는-코드">의도하지 않게 동작하는 코드</h2>
<p>원래 코드는 좀 더 복잡하지만, 문제가 되는 부분만 발췌해 보면 다음과 같다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
foolist <span style="color:#f92672">=</span> []
x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>])
foolist<span style="color:#f92672">.</span>append(x)
<span style="display:block;width:100%;background-color:#3c3d38">x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span>foolist<span style="color:#f92672">.</span>append(x)
<span style="color:#66d9ef">print</span>(foolist)</code></pre></td></tr></table>
</div>
</div>
<p>결과는</p>
<blockquote>
<p>[array([2, 3]), array([2, 3])]</p>
</blockquote>
<p>([1,2], [2,3]) 이 찍힐 줄 알았는데, ([2,3], [2,3]) 이 찍혔다.</p>
<p>어떻게 하면 원래 예상한 것 대로 동작하게 할 수 있을까? x += 1 을 다음과 같이 고친다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="-는--와-같지-않다">+= 는 + 와 같지 않다.</h3>
<h2 id="연산자-오버로딩">연산자 오버로딩</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Integer</span>:
    <span style="color:#66d9ef">def</span> __init__(self, x):
        self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> x
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_rc</span>(self, x):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>__class__(x)
    <span style="color:#66d9ef">def</span> __iadd__(self, other):
        <span style="color:#66d9ef">if</span> type(other) <span style="color:#f92672">==</span> __class__:
            self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>x <span style="color:#f92672">+</span> other<span style="color:#f92672">.</span>x
        <span style="color:#66d9ef">else</span>:
            self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>x <span style="color:#f92672">+</span> other
        <span style="color:#66d9ef">return</span> self
    <span style="color:#66d9ef">def</span> __add__(self, other):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_rc(self<span style="color:#f92672">.</span>x <span style="color:#f92672">+</span> other<span style="color:#f92672">.</span>x)
    <span style="color:#66d9ef">def</span> __str__(self):
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;{}&#34;</span><span style="color:#f92672">.</span>format(self<span style="color:#f92672">.</span>x)
a <span style="color:#f92672">=</span> Integer(<span style="color:#ae81ff">10</span>)
<span style="color:#66d9ef">print</span>(id(a), a)     <span style="color:#75715e"># 140267813136872 10</span>

a <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> Integer(<span style="color:#ae81ff">2</span>)
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(a), a)     <span style="color:#75715e"># 140267813137096 12</span>
</span>
a <span style="color:#f92672">+=</span> <span style="color:#ae81ff">3</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(a), a)     <span style="color:#75715e"># 140267813137096 15</span></span></code></pre></td></tr></table>
</div>
</div>
<p>+= 연산자를 오버로딩하는 메소드는 <strong>iadd</strong> 메소드, + 연산자는 <strong>add</strong> 메소드이다.
Numpy 와 비슷하게 동작하게끔 하기 위해서, 의도적으로 이 두개를 다르게 만들었다.</p>
<p>20번 23번 줄을 보면 같은 id 인 것을 볼 수 있다.</p>
<blockquote>
<p>id(a) 함수는 객체의 참조값을 리턴한다. C 언어의 포인터와 비슷하다.
객체의 id 값은 unique 하다. 두 객체가 같은 id 를 가지고 있다면 객체는 같은 참조를 가르킨다.
실제 id 값은 실행할 때마다 다를 수 있다. 프로그램 내에서 이 값이 변하는지, 안 변하는지가 중요하다.</p>
</blockquote>
<h2 id="다른-예제로">다른 예제로</h2>
<h3 id="예제-1-numpy">예제 1. numpy</h3>
<p><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
a <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">3</span>)
a <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(a)       <span style="color:#75715e"># [1 2 3]</span></code></pre></td></tr></table>
</div>
</div>
_
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
a <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">3</span>)
a <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(a)       <span style="color:#75715e"># [1 2 3]</span></code></pre></td></tr></table>
</div>
</div></p>
<p>위 두개의 모두 a 의 값은 같다.</p>
<h3 id="예제-2-numpy-배열-일부-치환">예제 2. numpy 배열 일부 치환</h3>
<p><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">6</span>)
y <span style="color:#f92672">=</span> x[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
y <span style="color:#f92672">=</span> y <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(x)       <span style="color:#75715e"># [0 1 2 3 4 5]</span>
<span style="color:#66d9ef">print</span>(y)       <span style="color:#75715e"># [2 3]</span></code></pre></td></tr></table>
</div>
</div>
_
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">6</span>)
y <span style="color:#f92672">=</span> x[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(x)       <span style="color:#75715e"># [0 2 3 3 4 5]</span>
<span style="color:#66d9ef">print</span>(y)       <span style="color:#75715e"># [2 3]</span></code></pre></td></tr></table>
</div>
</div></p>
<p>위 아래 결과의 출력 값이 다르다. id 를 찍어보면 좀 더 명확해진다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
</span>x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">6</span>)
y <span style="color:#f92672">=</span> x[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4332161104 [0 1 2 3 4 5]</span>
<span style="color:#66d9ef">print</span>(id(y), y)       <span style="color:#75715e"># 4387106608 [1 2]</span>
y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4332161104 [0 2 3 3 4 5]</span>
<span style="color:#66d9ef">print</span>(id(y), y)       <span style="color:#75715e"># 4387106608 [2 3]</span>
y <span style="color:#f92672">=</span> y <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4332161104 [0 2 3 3 4 5]</span>
<span style="color:#66d9ef">print</span>(id(y), y)       <span style="color:#75715e"># 4387115216 [3 4]</span></code></pre></td></tr></table>
</div>
</div>
<p>그림을 그려보면 좀 더 쉽게 이해할 수 있다.</p>
<figure>
    <img src="/images/posts/python-operator-overloading.png"
         alt="Python Operator Overloading"/> 
</figure>

<p><em><strong>y += 1</strong></em> 과  <em><strong>y = y + 1</strong></em> 이 다르게 동작함을 다시 한번 확인할 수 있다.</p>
<h3 id="예제-3-built-in-type">예제 3. built-in type</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># integer example</span>
x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
y <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4557295680 10</span>
<span style="color:#66d9ef">print</span>(id(y), y)       <span style="color:#75715e"># 4557295680 10</span>
x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4557295712 11</span>
x <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">print</span>(id(x), x)       <span style="color:#75715e"># 4557295744 12</span></code></pre></td></tr></table>
</div>
</div>
<p>두 integer 변수 x, y 의 값이 같으면 id 도 같다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># string example 1</span>
s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;xyz&#39;</span>
t <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;xyz&#39;</span>
<span style="color:#66d9ef">print</span>(id(s), s)       <span style="color:#75715e"># 4437129008 xyz</span>
<span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4437129008 xyz</span>
t <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;123&#39;</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4437389104 xyz123</span>
</span>t <span style="color:#f92672">=</span> t <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;123&#39;</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4437389104 xyz123123</span></span></code></pre></td></tr></table>
</div>
</div>
<p>문자열을 참조하는 두 변수 s, t 는 같은 id 를 갖는다. 즉 같은 참조를 가르킨다.
그런데 7번째 줄과 9번째 줄을 보면 id 는 같지만 문자열이 다르다.</p>
<ul>
<li>numpy 객체 예에서는 += 의 경우 id 는 바뀌지 않았고, + 의 경우 바뀌었다.</li>
<li>문자열 객체 예에서는 반대다.</li>
</ul>
<p>조금만 코드를 수정해 보자.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># string example 2</span>
t <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;xyz&#39;</span>
<span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4451686384 xyz</span>
t <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;123&#39;</span>
tt <span style="color:#f92672">=</span> t
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4452413296 xyz123</span>
</span><span style="color:#66d9ef">print</span>(id(tt), tt)     <span style="color:#75715e"># 4452413296 xyz123</span>
t <span style="color:#f92672">=</span> t <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;123&#39;</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">print</span>(id(t), t)       <span style="color:#75715e"># 4452413168 xyz123123</span>
</span><span style="color:#66d9ef">print</span>(id(tt), tt)     <span style="color:#75715e"># 4452413296 xyz123</span></code></pre></td></tr></table>
</div>
</div>
<p>6번째 9번째 줄을 보면, 이제는 “+=” 연산자, “+” 연산자 모두 id 값이 바뀐다.</p>
<p>추측컨데 [String example 1] 8번째 줄 t = t + &lsquo;123&rsquo; 를 수행할 때 기존의 t 의 참조가 더이상 필요하지 않기 때문에
t 의 id 를 재활용한 것으로 생각해 볼 수 있다. [String example 2] 5번째 줄에서 tt 변수가 참조를 가지고 있으므로
8번째 줄을 수행할 때 t 에는 새로운 id 가 할당된다고 볼 수 있을 것이다.</p>
<h3 id="예제-4-사용자-정의-클래스">예제 4. 사용자 정의 클래스</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyClass</span>:
</span>    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

x1 <span style="color:#f92672">=</span> MyClass()
x2 <span style="color:#f92672">=</span> MyClass()

<span style="color:#66d9ef">print</span>(id(x1), x1)        <span style="color:#75715e"># 4440505872 &lt;__main__.MyClass object at 0x108acbe10&gt;</span>
<span style="color:#66d9ef">print</span>(id(x2), x2)        <span style="color:#75715e"># 4440578896 &lt;__main__.MyClass object at 0x108addb50&gt;</span>
<span style="color:#66d9ef">print</span>(x1 <span style="color:#f92672">==</span> x2)          <span style="color:#75715e"># False</span></code></pre></td></tr></table>
</div>
</div>
<p>x1, x2 모두 self.x = 10 같은 값을 가지고 있지만 다른 객체이며 다른 id 를 가지고 있다.</p>
<h2 id="결론">결론</h2>
<ul>
<li>+= 와 + 연산자는 다르게 동작한다.</li>
<li>새로운 클래스에서 연산자 오버로딩을 사용할 경우 주의해서 사용하자.</li>
</ul>

  </section>


  <div class="post-meta-code">
  

  
    <div>
      <i>카테고리 : </i>
      
      
      <a href="https://flyingmonocopter.github.io/categories/programming">[programming]</a>
      
    </div>
  

  
    <div>
      <i>태그 : </i>
      
      
      <a href="https://flyingmonocopter.github.iotags/python">#python</a>
      
      <a href="https://flyingmonocopter.github.iotags/object">#object</a>
      
      <a href="https://flyingmonocopter.github.iotags/numpy">#numpy</a>
      
      <a href="https://flyingmonocopter.github.iotags/operator">#operator</a>
      
      <a href="https://flyingmonocopter.github.iotags/operator-overloading">#operator overloading</a>
      
      <a href="https://flyingmonocopter.github.iotags/%ED%8C%8C%EC%9D%B4%EC%84%A0">#파이선</a>
      
      <a href="https://flyingmonocopter.github.iotags/%EA%B0%9D%EC%B2%B4">#객체</a>
      
      
    </div>
  

  
    <div>
      <i>참고 글 : </i>
      
      <a href="https://medium.com/@doojin.kang/understanding-python-operator-overloading-to-prevent-wrong-code-a96668e6c263">https://medium.com/@doojin.kang/understanding-python-operator-overloading-to-prevent-wrong-code-a96668e6c263</a>
      
    </div>
  

  </div>



  <div class="post-comment">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "flying-monocopter" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>

</div>


<footer class="footer">
  <div class="copyright">
    <a href="https://https://gohugo.io/"><img src="/images/hugo-logo-wide.svg" height=20px></a>
  </div>
  <div class="copyright">
    HUGO THEME by COPYRIGHT (C) <a href="https://blog.lulab.net">DONGGEUN,BANG (LUBANG).</a> ALL RIGHTS RESERVED.
  </div>
  <div class="share">
    FLYING MONOCOPTER :
    <a href="https://github.com/flyingmonocopter" title="Github" target="_blank"><i class="fa fa-github"></i> GITHUB </a> &nbsp;
    <a href="mailto:flyingmonocopter@gmail.com" title="Email" target="_blank"><i class="fa fa-envelope"></i> mail</a>
  </div>
</footer>
</body>
</html>

